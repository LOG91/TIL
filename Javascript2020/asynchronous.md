# 비동기 (Asynchronous)
드.디.어. 미루고 미루던 비동기 TIL을 작성한다

카일 심슨의 You don't know JS를 참고했는데 👍👍👍 였다

물론 100% 이해하긴 힘들었다 CS스러운 단어도 나오고 암튼 어려운 단어들이 있었다

### 비동기란?
비동기는 자바스크립트에서 동기적 실행(위에서 아래로 코드를 읽어감)에서

예상치 못한 실행순서를 만들 수 있는 자바스크립트의 특징이다
```js
let responsed = ajax('http://api/blahblah');

console.log(responsed);
```
비동기 함수인 ajax의 실행이다 우리가 예상한 responsed는 ajax의 반환값이 아닌

undefined를 얻게 된다

#### Callback
이것을 해결하는 첫번째 방법은 callback을 이용한 것이다

아래와 같이 네트워크에서 값 받아오는 것이 완료되었을 시에 콜백함수 실행해줘~ 부탁하는 것이다

```js
let responsed = ajax('http://api/blahblah', data => {
  console.log(data);
});
```

### 비동기 처리 과정
자바스크립트 엔진은 비동기로 처리하는 함수를 만날 경우엔 원래의 실행 순서에서 벗어나서

웹API라는 곳으로 함수를 보낸다 그리고 본 로직이 다 끝나고 콜스택이 다 비워지게 되면

이벤트루프 큐에 있는 완료가 된 비동기함수는 콜스택으로 보내지고 실행이 된다

setTimeout을 굉장히 짧은 시간으로 하면 동기적으로 실행되는 코드 중간에 콜백함수가 처리가 되는 것은 아닐까

생각했던 것은 깔끔히 해결이 되었다

그럴 수가 없다 본 로직이 다 완료가 되고 나서 차례로 이벤트루프를 통하여 콜스택으로 보내지기 때문이다!

### 비동기 스케쥴링
api를 통해서 대량의 데이터를 받아온 적이 없기 때문에 성능의 문제가 일어나는 경우도 없었었고,

setTimeout을 사용하여 개발자가 원하는 비동기 스케쥴링을 한다는 것 자체를 생각해본 적이 없었었는데

책을 보며 어떤 경우에는 일을 분산하기 위하여서 그렇게 스케쥴링을 할 수도 있겠다는 것이 처음으로

이해가 되었다 짜릿

### chunk 단위로 이해하자!
자바스크립트엔진은 사실상 비동기를 포함하여도 어떻게 보면 모든 것을 동기적으로 실행한다고 볼 수도?

있다 왜냐하면 엔진은 chunk된 여러가지 함수를 계속해서 처리를 하는데 비동기는 외부의 어딘가에 보내졌다가

다시 불려 오고 뒤에서 실행되는, 즉 순서만 바뀐 것이기도 하기 때문이다!

JS엔진은 그저 오는 족족 실행시켜준다고 보면 된다


---
### Reference
- You don't know JS (kyle simpson)