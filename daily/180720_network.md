# 180720 TIL (웹의 동작)

### TCP/IP

인터넷과 관련된 프로토콜들을 모은 것이라고 보면 된다

#### 계층형이다

인터넷에 하나의 프로토콜만 있는 것이 아니다 그렇기에 변경된 경우에

전체를 바꿔야 하지만 계층형으로 두었기에 바뀐 부분만 바꿀 수 있는 장점이 있다

##### 계층 구조

애플리케이션 계층(HTTP)

트랜스포트 계층(TCP)

네트워크 계층(IP)

링크 계층(네트워크, 하드웨어쪽)



#### 통신 흐름 (클라이언트측에서 출발)

##### 1. 애플리케이션(HTTP)

이 계층에서 어느 웹페이지를 보고싶다는 HTTP 리퀘스트를 지시한다 

##### 2. 트랜스포트(TCP)

1의 계층에서 받은 데이터(HTTP메시지)를 통신하기 쉽게 조각내어 안내 번호와

포트 번호를 붙여 네트워크 계층에 전달한다

##### 3. 네트워크(IP)

수신지 MAC 주소를 추가하여 링크 계층에 전달한다

##### 4. 링크 (네트워크)

받은 데이터를 서버의 링크 계층에 전달한다



- 송신할 때 계층을 거칠 때마다 TCP헤더, IP헤더 등 헤더를 추가한다
  수신쪽에서는 반대로 올라올 때마다 헤더를 반드시 삭제해준다



#### HTTP와 관계가 깊은 TCP IP DNS

##### 배송을 담당하는 IP

IP의 역할은 개개의 패킷을 상대방에게 전달하는 것이다

라우팅에 의해 전달되는데 목적지가 분명할 뿐이지 누구도 정확하게 파악할 순 없다

##### 신뢰성을 담당하는 TCP

신뢰성 있는 바이트 스트림 서비스를 제공한다

바이트 스트림 서비스는 대용량의 데이터이기 때문에 TCP에서는 TCP세그먼트라고

불리는 단위 패킷으로 작게 분해하여 관리하는 것을 말하고 신뢰성 있는 서비스를

상대방에게 보내는 서비스를 말한다

TCP는 상대방에게 확실하게 데이터를 보내는 역할을 한다

쓰리웨이 핸드셰이킹이라는 방법을 사용한다

이 방법은 패킷을 바로 보내고 끝내는 것이 아니라 보내졌는지 여부를 상대에게 확인하러

간다 SYN, ACK, TCP플래그를 사용한다

이 과정에서 어디선가 통신이 도중에 끊어지면 TCP는 그와 동시에 같은 수순으로

패킷을 재전송한다

##### 이름을 담당하는 DNS

www.whale.com의 주소를 입력하면 dns서버에서 해당 주소의 IP주소를 반환해주고

반환받은 IP주소로 접근한다



### URI와 URL

#### URI는 리소스 식별자

Uniform Resource Identifiers



### 간단한 프로토콜 HTTP

HTTP는 클라이언트와 서버간의 통신을 한다

반드시 요청(Request)이 있고 응답(Response)이 있다

##### HTTP는 스테이트리스(stateless) 프로토콜이다

요청과 응답을 교환하는 동안에 상태를 관리하지 않는다

이것에 한계가 있다 예를 들어 로그인하고 페이지를 옮길 때 정보가 사라지면 다시 로그인을

해야 하는 경우가 되겠다 이 때문에 쿠키라는 기술이 도입되었다

쿠키는 서버에서 리스폰스로 보내진 Set-Cookie라는 헤더 필드에 의해 쿠키를

클라이언트에 보존하게 된다 다음 번에 같은 서버로 리퀘스트를 보낼 때 자동으로 쿠키 값을

넣어서 송신한다 서버는 쿠키를 통해서 어느 클라이언트인지 알 수 있게 되는 것이다



### HTTP 정보는 HTTP메세지에 있다

HTTP 메세지는 크게 메세지 헤더와 메세지 바디로 구성되어 있다

그리고 최초에 나타나는개행으로 헤더와 바디를 구분한다

메세지 바디는 항상 존재한다고 할 수는 없다